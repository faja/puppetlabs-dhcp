#################################
# <%= name network mask %>
#################################
subnet <%= network %> netmask <%= mask %> {
  pool
  {
<% if failover != '' -%>
    failover peer "<%= failover %>";
<% end -%>
<% range.each do |r| -%>
    range <%= r %>;
<% end -%>
  }

  option subnet-mask <%= mask %>;
  option routers <%= gateway %>;
<% if ! @pxefilename then -%>
  if exists user-class and option user-class = "iPXE" {
    filename "razor.ipxe"; # we are in an iPXE kernel and load static script
  } else {
    filename "undionly.kpxe"; # we are in burned in PXE and load iPXE kernel
  }
<% end -%>
<% if options.is_a? Array -%>
<%   options.each do |opt| -%>
  option <%= opt %>;
<%   end -%>
<% elsif options != '' -%>
  option <%= options %>;
<% end -%>
<% if parameters.is_a? Array -%>
<%   parameters.each do |param| -%>
  <%= param %>;
<%   end -%>
<% elsif parameters != '' -%>
  <%= parameters %>;
<% end -%>
}

